<%- include('../partials/header') %>

<div class="container" style="margin-top:30px;">
  <a href="/admin/orders" class="btn ghost">Back</a>
  <div style="display:flex; gap:20px; margin-top:16px;">
    <div style="flex:1;">
      <div class="card">
        <h3>Order <%= order._id %></h3>
        <p><strong>User:</strong> <%= order.user?.email || '—' %></p>
        <p><strong>Address:</strong> <%= order.address || '—' %></p>
        <p><strong>Total:</strong> $<%= order.total %></p>
        <p><strong>Status:</strong> <%= order.status %></p>
      </div>

      <div class="card" style="margin-top:12px;">
        <h4>Items</h4>
        <ul>
          <% order.items.forEach(it => { %>
            <li><%= it.name %> — $<%= it.price %> × <%= it.quantity %></li>
          <% }) %>
        </ul>
      </div>
    </div>

    <div style="width:320px;">
      <div class="card">
        <h4>Change status</h4>
        <form action="/admin/orders/<%= order._id %>/status" method="post">
          <select name="status">
            <% ['pending','processing','shipped','delivered','cancelled'].forEach(s => { %>
              <option value="<%= s %>" <%= order.status===s ? 'selected' : '' %>><%= s %></option>
            <% }) %>
          </select>
          <div style="margin-top:12px;">
            <button class="btn" type="submit">Update</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>
